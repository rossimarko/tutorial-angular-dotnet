<!-- Standard Layout -->
@if (visualizationType === 'standard') {
  <div class="mb-3">
    <label [for]="inputId()" class="form-label">
      {{ label }}
      @if (required) {
        <span class="text-danger">*</span>
      }
    </label>
    <select
      [id]="inputId()"
      class="form-select"
      [class.is-invalid]="hasError()"
      [value]="value()"
      [disabled]="disabled()"
      [multiple]="multiple"
      [attr.aria-label]="label"
      [attr.aria-required]="required"
      [attr.aria-invalid]="hasError()"
      [attr.aria-describedby]="hasError() ? inputId() + '-error' : helpText ? inputId() + '-help' : null"
      (change)="onInput($event)"
      (blur)="onBlur()">
      @if (placeholder && !multiple) {
        <option value="">{{ placeholder }}</option>
      }
      @for (option of options; track option.value) {
        <option [value]="option.value">{{ option.label }}</option>
      }
    </select>
    @if (hasError()) {
      <div [id]="inputId() + '-error'" class="invalid-feedback">
        {{ errorMessage() }}
      </div>
    }
    @if (helpText && !hasError()) {
      <div [id]="inputId() + '-help'" class="form-text">
        {{ helpText }}
      </div>
    }
  </div>
}

<!-- Floating Labels Layout -->
@if (visualizationType === 'floating') {
  <div class="form-floating mb-3">
    <select
      [id]="inputId()"
      class="form-select"
      [class.is-invalid]="hasError()"
      [value]="value()"
      [disabled]="disabled()"
      [multiple]="multiple"
      [attr.aria-label]="label"
      [attr.aria-required]="required"
      [attr.aria-invalid]="hasError()"
      [attr.aria-describedby]="hasError() ? inputId() + '-error' : helpText ? inputId() + '-help' : null"
      (change)="onInput($event)"
      (blur)="onBlur()">
      @if (placeholder && !multiple) {
        <option value="">{{ placeholder }}</option>
      }
      @for (option of options; track option.value) {
        <option [value]="option.value">{{ option.label }}</option>
      }
    </select>
    <label [for]="inputId()">
      {{ label }}
      @if (required) {
        <span class="text-danger">*</span>
      }
    </label>
    @if (hasError()) {
      <div [id]="inputId() + '-error'" class="invalid-feedback">
        {{ errorMessage() }}
      </div>
    }
    @if (helpText && !hasError()) {
      <div [id]="inputId() + '-help'" class="form-text">
        {{ helpText }}
      </div>
    }
  </div>
}

<!-- Input Group Layout -->
@if (visualizationType === 'input-group') {
  <div class="mb-3">
    @if (label) {
      <label [for]="inputId()" class="form-label">
        {{ label }}
        @if (required) {
          <span class="text-danger">*</span>
        }
      </label>
    }
    <div class="input-group" [class.has-validation]="hasError()">
      @if (prefixIcon || prefixText) {
        <span class="input-group-text">
          @if (prefixIcon) {
            <i [class]="prefixIcon"></i>
          }
          @if (prefixText) {
            {{ prefixText }}
          }
        </span>
      }
      <select
        [id]="inputId()"
        class="form-select"
        [class.is-invalid]="hasError()"
        [value]="value()"
        [disabled]="disabled()"
        [multiple]="multiple"
        [attr.aria-label]="label"
        [attr.aria-required]="required"
        [attr.aria-invalid]="hasError()"
        [attr.aria-describedby]="hasError() ? inputId() + '-error' : helpText ? inputId() + '-help' : null"
        (change)="onInput($event)"
        (blur)="onBlur()">
        @if (placeholder && !multiple) {
          <option value="">{{ placeholder }}</option>
        }
        @for (option of options; track option.value) {
          <option [value]="option.value">{{ option.label }}</option>
        }
      </select>
      @if (suffixIcon || suffixText) {
        <span class="input-group-text">
          @if (suffixIcon) {
            <i [class]="suffixIcon"></i>
          }
          @if (suffixText) {
            {{ suffixText }}
          }
        </span>
      }
      @if (hasError()) {
        <div [id]="inputId() + '-error'" class="invalid-feedback">
          {{ errorMessage() }}
        </div>
      }
    </div>
    @if (helpText && !hasError()) {
      <div [id]="inputId() + '-help'" class="form-text">
        {{ helpText }}
      </div>
    }
  </div>
}
